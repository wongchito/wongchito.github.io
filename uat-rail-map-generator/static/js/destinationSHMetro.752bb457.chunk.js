"use strict";(self.webpackChunkrail_map_generator=self.webpackChunkrail_map_generator||[]).push([[9586],{4074:function(t,e,n){n.r(e);var r=n(9439),a=n(3433),i=n(2791),s=n(6169),c=n(184);e.default=(0,i.memo)((function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o,{}),(0,c.jsx)(l,{})]})}));var o=(0,i.memo)((function(){return(0,c.jsx)("defs",{children:(0,c.jsx)("marker",{id:"slope",viewBox:"-1.5 0 3 1.5",refY:.5,children:(0,c.jsx)("path",{d:"M0,0L1,1H-1z",fill:"var(--rmg-theme-colour)"})})})})),l=function(){var t=(0,s.CG)((function(t){return t.helper})).routes,e=(0,s.CG)((function(t){return t.param})),n=(0,a.Z)(new Set(t.filter((function(t){return t.includes(e.current_stn_idx)})).map((function(t){var n=t.filter((function(t){return!["linestart","lineend"].includes(t)}));return"l"===e.direction?n[0]:n.reverse()[0]})))),o=[n.map((function(t){return e.stn_list[t].name[0]})),n.map((function(t){return e.stn_list[t].name[1]}))],l=(0,i.useRef)(null),h=(0,i.useState)({width:0}),x=(0,r.Z)(h,2),g=x[0],j=x[1];(0,i.useEffect)((function(){return j(l.current.getBBox())}),(0,a.Z)(o.flat()));var _=e.svgWidth.destination/2,v=_-10-36-g.width>=162.5&&_-10-36-264>=162.5?_:"l"===e.direction?(e.svgWidth.destination+g.width-264)/2:(e.svgWidth.destination-g.width+264)/2;return(0,c.jsxs)("g",{transform:"translate(0,".concat(e.svg_height-300,")"),children:[(0,c.jsx)("path",{stroke:"var(--rmg-theme-colour)",strokeWidth:12,d:"l"===e.direction?"M".concat(e.svgWidth.destination-24,",16 H 36"):"M24,16 H ".concat(e.svgWidth.destination-36),transform:"translate(0,220)",markerEnd:"url(#slope)"}),(0,c.jsx)(m,{ref:l,destNames:o}),!1!==e.platform_num&&(0,c.jsx)("g",{transform:"translate(".concat(v,",0)"),children:(0,c.jsx)(d,{})}),e.line_name[0].match(/^[\w\d]+/)?(0,c.jsx)(f,{}):(0,c.jsx)(u,{})]})},m=(0,i.forwardRef)((function(t,e){var n=(0,s.CG)((function(t){return t.param}));return(0,c.jsx)("g",{ref:e,transform:"translate(".concat("l"===n.direction?36:n.svgWidth.destination-36,",145)"),children:(0,i.useMemo)((function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("g",{transform:"translate(0,".concat(2===t.destNames[0].length?-20:20,")"),children:(0,c.jsx)("path",{d:"M60,60L0,0L60-60H100L55-15H160V15H55L100,60z",fill:"black",transform:"rotate(".concat("l"===n.direction?0:180,")scale(0.8)")})}),(0,c.jsxs)("g",{textAnchor:"l"===n.direction?"start":"end",transform:"translate(".concat("l"===n.direction?148:-148,",25)"),children:[t.destNames[0].map((function(t,e){return(0,c.jsx)("text",{className:"rmg-name__zh",fontSize:70,dy:-100*e+7,children:"\u5f80"+t},e)})),t.destNames[1].map((function(t,e){return(0,c.jsx)("text",{className:"rmg-name__en",fontSize:25,dy:-100*e+40,children:"To "+t},e)}))]})]})}),[n.direction].concat((0,a.Z)(t.destNames.flat())))})})),d=function(){var t=(0,s.CG)((function(t){return t.param}));return(0,i.useMemo)((function(){return(0,c.jsxs)("g",{transform:"translate(".concat(-102.5,",150)"),children:[(0,c.jsx)("circle",{r:60,fill:"none",stroke:"black",strokeWidth:2}),(0,c.jsx)("text",{className:"rmg-name__en",dominantBaseline:"central",fontSize:120,textAnchor:"middle",children:t.platform_num}),(0,c.jsx)("text",{className:"rmg-name__zh",fontSize:100,dominantBaseline:"central",x:65,children:"\u7ad9\u53f0"})]})}),[t.platform_num])},u=function(){var t=(0,s.CG)((function(t){return t.param})),e=t.line_name,n=t.direction,o=t.svgWidth,l="l"===n?o.destination-42:42,m=(0,i.useRef)(null),d=i.useState({width:0}),u=(0,r.Z)(d,2),f=u[0],h=u[1];i.useEffect((function(){return h(m.current.getBBox())}),(0,a.Z)(e));var x=("l"===n?-f.width:0)-6,g=("l"===n?-1:1)*f.width/2;return(0,i.useMemo)((function(){return(0,c.jsxs)("g",{transform:"translate(".concat(l,",92)"),children:[(0,c.jsx)("rect",{fill:"var(--rmg-theme-colour)",x:x,width:f.width+10,height:120}),(0,c.jsxs)("g",{textAnchor:"r"===n?"start":"end",transform:"translate(0,68)",fill:"var(--rmg-theme-fg)",children:[(0,c.jsx)("g",{ref:m,children:(0,c.jsx)("text",{className:"rmg-name__zh",fontSize:68,children:e[0]})}),(0,c.jsx)("text",{className:"rmg-name__en",fontSize:30,textAnchor:"middle",x:g,dy:42,children:e[1]})]})]})}),[f,l,n,e])},f=function(){var t=(0,s.CG)((function(t){return t.param})),e=t.line_name[0].match(/^[\w\d]+|.+/g),n=(0,r.Z)(e,2),o=n[0],l=n[1],m="l"===t.direction?t.svgWidth.destination-36-210:90;return(0,i.useMemo)((function(){return(0,c.jsxs)("g",{transform:"translate(".concat(m,",92)"),children:[(0,c.jsx)("rect",{fill:"var(--rmg-theme-colour)",x:-54,width:108,height:120}),(0,c.jsx)("text",{className:"rmg-name__zh",fill:"var(--rmg-theme-fg)",fontSize:96,textAnchor:"middle",dominantBaseline:"central",transform:"translate(0,60)",letterSpacing:-5,children:o}),(0,c.jsxs)("g",{textAnchor:"start",transform:"translate(74,68)",children:[(0,c.jsx)("text",{className:"rmg-name__zh",fontSize:68,children:l}),(0,c.jsx)("text",{className:"rmg-name__en",fontSize:30,dy:42,children:t.line_name[1]})]})]})}),[m].concat((0,a.Z)(t.line_name)))}}}]);
//# sourceMappingURL=destinationSHMetro.752bb457.chunk.js.map