"use strict";(self.webpackChunkrail_map_generator=self.webpackChunkrail_map_generator||[]).push([[1273],{5387:function(n,t,e){e.r(t);var r=e(1413),s=e(5987),i=e(3433),a=e(2791),c=e(6169),o=e(184),l=["nextName"];t.default=function(){var n=(0,c.CG)((function(n){return n.helper})).routes,t=(0,c.CG)((function(n){return n.param})),e=t.svg_height-300,r=(0,a.useMemo)((function(){return n.filter((function(n){return n.includes(t.current_stn_idx)})).map((function(n){return n[n.indexOf(t.current_stn_idx)+("l"===t.direction?1:-1)]})).reduce((function(n,t){return n.includes(t)?n:n.concat(t)}),[])}),[n.toString(),t.current_stn_idx,t.direction]),s=(0,a.useMemo)((function(){return n.filter((function(n){return n.includes(t.current_stn_idx)})).map((function(n){return n[n.indexOf(t.current_stn_idx)+("l"===t.direction?-1:1)]})).reduce((function(n,t){return n.includes(t)?n:n.concat(t)}),[])}),[n.toString(),t.current_stn_idx,t.direction]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d,{}),(0,o.jsx)("g",{transform:"translate(0,".concat(e,")"),children:(0,o.jsx)(u,{prevStnIds:r,nextStnIds:s})})]})};var d=(0,a.memo)((function(){return(0,o.jsxs)("defs",{children:[(0,o.jsx)("marker",{id:"slope",viewBox:"-1.5 0 3 1.5",refY:.5,children:(0,o.jsx)("path",{d:"M0,0L1,1H-1z",fill:"var(--rmg-theme-colour)"})}),(0,o.jsxs)("filter",{id:"pujiang_outline_runin",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",x:"0",y:"-1000",width:"5000",height:"2000",children:[(0,o.jsx)("feMorphology",{operator:"erode",in:"SourceAlpha",radius:"0",result:"e1"}),(0,o.jsx)("feMorphology",{operator:"erode",in:"SourceAlpha",radius:"1",result:"e2"}),(0,o.jsx)("feComposite",{in:"e1",in2:"e2",operator:"xor",result:"outline"}),(0,o.jsx)("feComposite",{in:"outline",in2:"SourceGraphic",operator:"over",result:"output"})]})]})})),u=function(n){var t=(0,c.CG)((function(n){return n.param})),e=t.svgWidth.runin/2,r=1===n.nextStnIds.length&&["linestart","lineend"].includes(n.nextStnIds[0]),s=1===n.prevStnIds.length&&["linestart","lineend"].includes(n.prevStnIds[0]),i=n.nextStnIds.map((function(n){return t.stn_list[n].name})),a=10+(n.nextStnIds.length>1?-50*(i[0][0].split("\\").length-1)+-30*(i[0][1].split("\\").length-1):0),l=n.prevStnIds.map((function(n){return t.stn_list[n].name})),d=10+(n.prevStnIds.length>1?-50*(l[0][0].split("\\").length-1)+-30*(l[0][1].split("\\").length-1):0);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("g",{transform:"translate(0,110)",strokeWidth:12,fill:"none",children:[n.nextStnIds.length>1&&(0,o.jsx)("path",{stroke:"var(--rmg-theme-colour)",d:"l"===t.direction?"M".concat(t.svgWidth.runin/3,",125 L").concat(t.svgWidth.runin/6,",").concat(a," H36"):"M".concat(t.svgWidth.runin/3*2,",125 L").concat(t.svgWidth.runin/6*5,",").concat(a," H").concat(t.svgWidth.runin-36),markerEnd:"url(#slope)"}),n.prevStnIds.length>1&&(0,o.jsx)("g",{filter:"#999999"===t.theme[2]?"url(#pujiang_outline_railmap)":void 0,children:(0,o.jsx)("path",{stroke:"var(--rmg-grey)",d:"l"===t.direction?"M".concat(t.svgWidth.runin/3*2,",125 L").concat(t.svgWidth.runin/6*5,",").concat(d," H").concat(t.svgWidth.runin-24):"M".concat(t.svgWidth.runin/3,",125 L").concat(t.svgWidth.runin/6,",").concat(d," H24")})})]}),r&&"sh2020"!==t.info_panel_type?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("g",{filter:"#999999"===t.theme[2]?"url(#pujiang_outline_railmap)":void 0,children:(0,o.jsx)("path",{transform:"translate(0,220)",stroke:"var(--rmg-grey)",strokeWidth:12,d:"M24,16 H ".concat(t.svgWidth.runin-24)})}),(0,o.jsx)("g",{transform:"translate(".concat("l"===t.direction?36:t.svgWidth.runin-36,",160)"),textAnchor:"l"===t.direction?"start":"end",children:(0,o.jsx)(h,{})})]}):s&&"sh2020"!==t.info_panel_type?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{transform:"translate(0,220)",stroke:"var(--rmg-theme-colour)",strokeWidth:12,d:"l"===t.direction?"M ".concat(t.svgWidth.runin-24,",16 H 36"):"M24,16 H ".concat(t.svgWidth.runin-36),markerEnd:"url(#slope)"}),(0,o.jsx)("g",{transform:"translate(".concat("l"===t.direction?t.svgWidth.runin-36:36,",160)"),textAnchor:"l"===t.direction?"end":"start",children:(0,o.jsx)(h,{})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("g",{transform:"translate(0,220)",strokeWidth:12,children:[(0,o.jsx)("path",{stroke:"var(--rmg-theme-colour)",d:"M ".concat(e,",16 H ").concat("l"===t.direction?36:t.svgWidth.runin-36),markerEnd:"url(#slope)"}),(0,o.jsx)("g",{filter:"#999999"===t.theme[2]?"url(#pujiang_outline_railmap)":void 0,children:(0,o.jsx)("path",{stroke:"var(--rmg-grey)",d:"M ".concat(e,",16 H ").concat("l"===t.direction?t.svgWidth.runin-24:24," ")})})]}),(0,o.jsx)("g",{transform:"translate(".concat(e,",160)"),textAnchor:"middle",children:(0,o.jsx)(h,{})})]}),(s||!r)&&(0,o.jsx)(x,{stnIds:n.nextStnIds}),(r||!s)&&(0,o.jsx)(g,{stnIds:n.prevStnIds})]})},h=function(){var n=(0,c.CG)((function(n){return n.param})),t=n.stn_list[n.current_stn_idx].name;return(0,a.useMemo)((function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("text",{className:"rmg-name__zh",fontSize:112,children:t[0]}),(0,o.jsx)("text",{className:"rmg-name__en",fontSize:36,dy:50,children:t[1].replace("\\"," ")})]})}),(0,i.Z)(t))},m=function(n){var t=n.nextName,e=(0,s.Z)(n,l);return(0,o.jsx)("g",(0,r.Z)((0,r.Z)({},e),{},{children:(0,a.useMemo)((function(){return(0,o.jsxs)(o.Fragment,{children:[t[0].split("\\").map((function(n,e,r){return(0,o.jsx)("text",{className:"rmg-name__zh",fontSize:48,dy:-50*(r.length-1-e)-30*(t[1].split("\\").length-1),children:n},n)})),t[1].split("\\").map((function(n,t,e){return(0,o.jsx)("text",{className:"rmg-name__en",fontSize:24,dy:28+-30*(e.length-1-t),children:n},n)}))]})}),(0,i.Z)(t))}))},g=function(n){var t=(0,c.CG)((function(n){return n.param})),e=n.stnIds.map((function(n){return t.stn_list[n].name})),r=(n.stnIds.length>1?15:125)+-50*e.map((function(n){return n[0].split("\\").length})).reduce((function(n,t){return n+t}),-e.length)+-30*e.map((function(n){return n[1].split("\\").length})).reduce((function(n,t){return n+t}),-e.length),s=70+(n.stnIds.length>1?-50*(e[0][0].split("\\").length-1)+-30*(e[0][1].split("\\").length-1):0);return(0,o.jsxs)("g",{fill:"gray",textAnchor:"l"===t.direction?"end":"start",transform:"translate(".concat("l"===t.direction?t.svgWidth.runin-36:36,",0)"),children:[(0,o.jsx)(m,{nextName:e[0],transform:"translate(0,183)"}),n.stnIds.length>1&&(0,o.jsx)(m,{nextName:e[1],transform:"translate(0,".concat(s,")")}),(0,o.jsxs)("g",{transform:"translate(0, ".concat(r,")"),children:[(0,o.jsx)("text",{className:"rmg-name__zh",fontSize:22,children:"\u4e0a\u4e00\u7ad9"}),(0,o.jsx)("text",{className:"rmg-name__en",fontSize:12,dx:"l"===t.direction?-70:70,children:"Past Stop"})]})]})},x=function(n){var t=(0,c.CG)((function(n){return n.param})),e=n.stnIds.map((function(n){return t.stn_list[n].name})),r=(n.stnIds.length>1?15:125)+-50*e.map((function(n){return n[0].split("\\").length})).reduce((function(n,t){return n+t}),-e.length)+-30*e.map((function(n){return n[1].split("\\").length})).reduce((function(n,t){return n+t}),-e.length),s=70+(n.stnIds.length>1?-50*(e[0][0].split("\\").length-1)+-30*(e[0][1].split("\\").length-1):0);return(0,o.jsxs)("g",{textAnchor:"l"===t.direction?"start":"end",transform:"translate(".concat("l"===t.direction?36:t.svgWidth.runin-36,",0)"),children:[(0,o.jsx)(m,{nextName:t.stn_list[n.stnIds[0]].name,transform:"translate(0,183)"}),n.stnIds.length>1&&(0,o.jsx)(m,{nextName:t.stn_list[n.stnIds[1]].name,transform:"translate(0,".concat(s,")")}),(0,o.jsxs)("g",{transform:"translate(0, ".concat(r,")"),children:[(0,o.jsx)("text",{className:"rmg-name__zh",fontSize:22,children:"\u4e0b\u4e00\u7ad9"}),(0,o.jsx)("text",{className:"rmg-name__en",fontSize:12,dx:"l"===t.direction?70:-70,children:"Next Stop"})]})]})}}}]);
//# sourceMappingURL=runinSHMetro.9ed56e2b.chunk.js.map